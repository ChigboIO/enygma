#!/usr/bin/env ruby

require 'enygma/encryptor'

if ARGV[0] && ARGV[0] == 'help'
	show_help
elsif ARGV.length < 1 || ARGV.length > 2
	puts "Incorrect number of argument."
	show_help
elsif !File.file?(ARGV[0])
	puts "The input file path does not exist"
	show_help
elsif ARGV[1] && File.file?(ARGV[1])
	puts "The output file path cannot be created, or file already exist"
	show_help
else
  Enygma::Encryptor.new(ARGV[0], ARGV[1]).encrypt
end

def show_help
	puts "\nTo encrypt a file"
	puts "\nUsage:"
	puts "\nencrypt <file> [<output>]"
	puts "\n\t <file>\t:\t The path to the input file to be encrypted"
	puts "\n\t <output>\t:\t (Optional) The path to the output file to save the cypher text. If not provided, the new name will be deduced from the source name"
end